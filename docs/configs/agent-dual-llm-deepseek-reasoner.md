# Agent åŒ LLM æ¨¡å¼é…ç½® - DeepSeek Reasoner

## ðŸ“ é…ç½®è¯´æ˜Ž

æ­¤é…ç½®å°†å¯ç”¨åŒ LLM æ¨¡å¼ï¼Œä¸¤ä¸ªé˜¶æ®µéƒ½ä½¿ç”¨ **DeepSeek Reasoner** æ¨¡åž‹ã€‚

### æž¶æž„è¯´æ˜Ž

```
ç”¨æˆ·é—®é¢˜
   â†“
[Function Call LLM: deepseek-reasoner]
   - æ·±åº¦æ€è€ƒå’ŒæŽ¨ç†
   - é€‰æ‹©åˆé€‚çš„å·¥å…·
   - æ‰§è¡Œå¤šè½®æœç´¢
   â†“
æ”¶é›†æ‰€æœ‰å·¥å…·ç»“æžœ
   â†“
[Answer LLM: deepseek-reasoner]
   - åŸºäºŽæœç´¢ç»“æžœæ·±åº¦æŽ¨ç†
   - ç”Ÿæˆé«˜è´¨é‡ç­”æ¡ˆ
   â†“
æœ€ç»ˆç­”æ¡ˆï¼ˆå«å¼•ç”¨ï¼‰
```

---

## ðŸ”§ é…ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šç¼–è¾‘ `.env` æ–‡ä»¶

æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `.env` æ–‡ä»¶ï¼Œæ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```bash
# ============================================
# Agent åŒ LLM æ¨¡å¼é…ç½® - DeepSeek Reasoner
# ============================================

# å·¥å…·è°ƒç”¨æ¨¡åž‹é…ç½®ï¼ˆæ€è€ƒã€æŽ¨ç†ã€é€‰æ‹©å·¥å…·ï¼‰
AGENT_FUNCTION_CALL_MODEL='{"provider": "deepseek", "model_name": "deepseek-reasoner", "temperature": 0.2, "max_tokens": 2000}'

# ç­”æ¡ˆç”Ÿæˆæ¨¡åž‹é…ç½®ï¼ˆç”Ÿæˆæœ€ç»ˆå›žç­”ï¼‰
# æ³¨æ„ï¼šå¿…é¡»è®¾ç½®æ­¤é¡¹æ‰èƒ½å¯ç”¨åŒ LLM æ¨¡å¼ï¼
AGENT_ANSWER_MODEL='{"provider": "deepseek", "model_name": "deepseek-reasoner", "temperature": 0.5, "max_tokens": 3000}'

# Agent å…¶ä»–é…ç½®ï¼ˆå¯é€‰ï¼‰
AGENT_MAX_ITERATIONS=10
AGENT_MAX_EXECUTION_TIME=120
AGENT_VERBOSE=true
AGENT_ENABLE_CACHE=true
```

### æ­¥éª¤ 2ï¼šç¡®ä¿ DeepSeek API Key å·²é…ç½®

åœ¨ `.env` æ–‡ä»¶ä¸­ç¡®è®¤ä»¥ä¸‹é…ç½®å­˜åœ¨ï¼š

```bash
# DeepSeek API é…ç½®
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com
```

### æ­¥éª¤ 3ï¼šé‡å¯åº”ç”¨

```bash
# åœæ­¢å½“å‰è¿è¡Œçš„åº”ç”¨ï¼ˆCtrl+Cï¼‰

# é‡æ–°å¯åŠ¨
chainlit run app.py
```

### æ­¥éª¤ 4ï¼šéªŒè¯é…ç½®

å¯åŠ¨åŽï¼ŒæŸ¥çœ‹æ—¥å¿—ä¸­çš„è¾“å‡ºï¼š

```bash
# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼š
ðŸš€ Agent initialized (max_iterations=10, max_execution_time=120s, dual_llm_mode=True, tools=...)
                                                                    ^^^^^^^^^^^^^^^^
                                                                    è¿™é‡Œåº”è¯¥æ˜¯ True
```

æ‰§è¡Œé—®é¢˜æ—¶ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```bash
ðŸ”„ åˆ‡æ¢åˆ° answer_llm ç”Ÿæˆæœ€ç»ˆå›žç­”...
```

---

## ðŸ“Š å‚æ•°è¯´æ˜Ž

### Temperature è®¾ç½®

| é˜¶æ®µ | Temperature | è¯´æ˜Ž |
|------|------------|------|
| **Function Call** | 0.2 | æ›´ç¡®å®šæ€§ï¼Œé€‚åˆå·¥å…·é€‰æ‹©å’Œé€»è¾‘æŽ¨ç† |
| **Answer** | 0.5 | ç¨å¾®åˆ›é€ æ€§ï¼Œç”Ÿæˆæ›´è‡ªç„¶çš„å›žç­” |

### Max Tokens è®¾ç½®

| é˜¶æ®µ | Max Tokens | è¯´æ˜Ž |
|------|-----------|------|
| **Function Call** | 2000 | è¶³å¤Ÿè¿›è¡Œæ·±åº¦æ€è€ƒå’Œå·¥å…·é€‰æ‹© |
| **Answer** | 3000 | è¶³å¤Ÿç”Ÿæˆè¯¦ç»†ã€å®Œæ•´çš„ç­”æ¡ˆ |

---

## âœ… ä¼˜åŠ¿

1. **æ·±åº¦æŽ¨ç†èƒ½åŠ›**
   - âœ… å·¥å…·è°ƒç”¨é˜¶æ®µï¼šæ˜¾ç¤ºå®Œæ•´çš„æ€è€ƒè¿‡ç¨‹ï¼ˆreasoning_contentï¼‰
   - âœ… ç­”æ¡ˆç”Ÿæˆé˜¶æ®µï¼šåŸºäºŽæœç´¢ç»“æžœæ·±åº¦æŽ¨ç†
   - âœ… åŒé‡æŽ¨ç†ï¼Œç­”æ¡ˆè´¨é‡æžé«˜

2. **æˆæœ¬ä¼˜åŒ–**
   - âœ… DeepSeek Reasoner æ¯” GPT-4o ä¾¿å®œ 95%
   - âœ… å³ä½¿è°ƒç”¨ä¸¤æ¬¡ DeepSeekï¼Œæ€»æˆæœ¬ä»è¿œä½ŽäºŽ GPT-4o
   - âœ… é€‚åˆéœ€è¦å¤§é‡æŽ¨ç†çš„å¤æ‚é—®é¢˜

3. **æ€è€ƒè¿‡ç¨‹å¯è§†åŒ–**
   - âœ… æ˜¾ç¤ºå·¥å…·é€‰æ‹©å‰çš„æŽ¨ç†è¿‡ç¨‹
   - âœ… æ˜¾ç¤ºç­”æ¡ˆç”Ÿæˆå‰çš„æŽ¨ç†è¿‡ç¨‹
   - âœ… ç”¨æˆ·å¯ä»¥çœ‹åˆ° AI çš„å®Œæ•´æ€è€ƒé“¾

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å“åº”æ—¶é—´

- **Function Call é˜¶æ®µ**ï¼š10-30ç§’ï¼ˆåŒ…å«æ·±åº¦æŽ¨ç†ï¼‰
- **Answer é˜¶æ®µ**ï¼š10-30ç§’ï¼ˆå†æ¬¡æ·±åº¦æŽ¨ç†ï¼‰
- **æ€»æ—¶é—´**ï¼šå¯èƒ½éœ€è¦ 20-60ç§’ï¼ˆå–å†³äºŽé—®é¢˜å¤æ‚åº¦ï¼‰

ðŸ’¡ **å»ºè®®**ï¼šå¯¹äºŽç®€å•é—®é¢˜ï¼Œå¯èƒ½ä¸éœ€è¦åŒ DeepSeek Reasonerã€‚è€ƒè™‘ï¼š
```bash
# Function Call ç”¨ deepseek-reasonerï¼ˆæ·±åº¦æŽ¨ç†ï¼‰
AGENT_FUNCTION_CALL_MODEL='{"provider": "deepseek", "model_name": "deepseek-reasoner"}'

# Answer ç”¨ deepseek-chatï¼ˆå¿«é€Ÿç”Ÿæˆç­”æ¡ˆï¼‰
AGENT_ANSWER_MODEL='{"provider": "deepseek", "model_name": "deepseek-chat"}'
```

### 2. é€‚ç”¨åœºæ™¯

**æœ€é€‚åˆ**ï¼š
- ðŸŽ¯ å¤æ‚çš„ç ”ç©¶æ€§é—®é¢˜
- ðŸŽ¯ éœ€è¦å¤šæ­¥æŽ¨ç†çš„ä»»åŠ¡
- ðŸŽ¯ éœ€è¦ä¸¥è°¨é€»è¾‘çš„å›žç­”

**ä¸å¤ªé€‚åˆ**ï¼š
- âŒ ç®€å•çš„äº‹å®žæŸ¥è¯¢
- âŒ éœ€è¦å¿«é€Ÿå“åº”çš„åœºæ™¯
- âŒ å®žæ—¶å¯¹è¯

### 3. ä¸Žå…¶ä»–é…ç½®å¯¹æ¯”

| é…ç½® | æˆæœ¬ | é€Ÿåº¦ | è´¨é‡ | æŽ¨ç†æ·±åº¦ |
|------|-----|------|-----|---------|
| **åŒ DeepSeek Reasoner** | ðŸ’° å¾ˆä½Ž | ðŸŒ æ…¢ | â­â­â­â­â­ | ðŸ§ ðŸ§ ðŸ§ ðŸ§ ðŸ§  |
| **DeepSeek Reasoner + GPT-4o** | ðŸ’°ðŸ’° ä¸­ | ðŸš€ ä¸­ | â­â­â­â­â­ | ðŸ§ ðŸ§ ðŸ§  |
| **å• GPT-4o** | ðŸ’°ðŸ’°ðŸ’° é«˜ | ðŸš€ðŸš€ å¿« | â­â­â­â­ | ðŸ§ ðŸ§  |

---

## ðŸ” æ•…éšœæŽ’æŸ¥

### é—®é¢˜ 1ï¼šæ—¥å¿—æ˜¾ç¤º `dual_llm_mode=False`

**åŽŸå› **ï¼š`AGENT_ANSWER_MODEL` æœªæ­£ç¡®é…ç½®

**è§£å†³**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­æ˜¯å¦æœ‰ `AGENT_ANSWER_MODEL`
2. ç¡®è®¤ JSON æ ¼å¼æ­£ç¡®ï¼ˆä½¿ç”¨å•å¼•å·åŒ…è£¹ï¼Œå†…éƒ¨ä½¿ç”¨åŒå¼•å·ï¼‰
3. é‡å¯åº”ç”¨

### é—®é¢˜ 2ï¼šå¯åŠ¨æŠ¥é”™ "Invalid provider"

**åŽŸå› **ï¼šDeepSeek é…ç½®ä¸æ­£ç¡®

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥çŽ¯å¢ƒå˜é‡
echo $DEEPSEEK_API_KEY
echo $DEEPSEEK_BASE_URL

# ç¡®ä¿éƒ½å·²è®¾ç½®
```

### é—®é¢˜ 3ï¼šæ²¡æœ‰çœ‹åˆ° "ðŸ”„ åˆ‡æ¢åˆ° answer_llm"

**åŽŸå› **ï¼šå¯èƒ½åœ¨ Chat æ¨¡å¼è€Œä¸æ˜¯ Agent æ¨¡å¼

**è§£å†³**ï¼š
1. ç¡®è®¤å½“å‰åœ¨ **Agent æ¨¡å¼**ï¼ˆç•Œé¢å³ä¸Šè§’ï¼‰
2. åŒ LLM åªåœ¨ Agent æ¨¡å¼ä¸‹ç”Ÿæ•ˆ

### é—®é¢˜ 4ï¼šæŽ¨ç†æ—¶é—´å¤ªé•¿

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

**é€‰é¡¹ 1**ï¼šåªåœ¨ Function Call é˜¶æ®µç”¨ Reasoner
```bash
AGENT_FUNCTION_CALL_MODEL='{"provider": "deepseek", "model_name": "deepseek-reasoner"}'
AGENT_ANSWER_MODEL='{"provider": "deepseek", "model_name": "deepseek-chat"}'  # æ”¹ç”¨ chat
```

**é€‰é¡¹ 2**ï¼šä¸¤ä¸ªé˜¶æ®µéƒ½ç”¨ deepseek-chatï¼ˆæ›´å¿«ï¼‰
```bash
AGENT_FUNCTION_CALL_MODEL='{"provider": "deepseek", "model_name": "deepseek-chat"}'
AGENT_ANSWER_MODEL='{"provider": "deepseek", "model_name": "deepseek-chat"}'
```

---

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [åŒ LLM æ¨¡å¼è¯¦è§£](../DUAL_LLM_MODE_EXPLAINED.md)
- [Agent æ¨¡å¼é…ç½®æŒ‡å—](../../openspec/specs/agent-mode/spec.md)
- [DeepSeek æ¨¡åž‹æ–‡æ¡£](https://platform.deepseek.com/docs)

---

## ðŸŽ¯ å¿«é€Ÿå‘½ä»¤

### å¤åˆ¶é…ç½®åˆ° .env

```bash
# æ–¹æ³• 1ï¼šæ‰‹åŠ¨ç¼–è¾‘
nano .env  # æˆ–ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨

# æ–¹æ³• 2ï¼šè¿½åŠ åˆ° .envï¼ˆå¦‚æžœç¡®å®šæ²¡æœ‰å†²çªï¼‰
cat >> .env << 'EOF'

# Agent åŒ LLM æ¨¡å¼ - DeepSeek Reasoner
AGENT_FUNCTION_CALL_MODEL='{"provider": "deepseek", "model_name": "deepseek-reasoner", "temperature": 0.2, "max_tokens": 2000}'
AGENT_ANSWER_MODEL='{"provider": "deepseek", "model_name": "deepseek-reasoner", "temperature": 0.5, "max_tokens": 3000}'
EOF
```

### éªŒè¯é…ç½®

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
grep "AGENT_" .env

# éªŒè¯ DeepSeek API Key
grep "DEEPSEEK_" .env
```

### é‡å¯åº”ç”¨

```bash
# åœæ­¢å½“å‰åº”ç”¨
# Ctrl+C

# é‡æ–°å¯åŠ¨
chainlit run app.py
```

---

## ðŸ’¬ æµ‹è¯•é—®é¢˜

é…ç½®å®ŒæˆåŽï¼Œè¯•è¯•è¿™äº›é—®é¢˜æ¥æµ‹è¯•åŒ Reasoner æ¨¡å¼ï¼š

1. **å¤æ‚ç ”ç©¶é—®é¢˜**ï¼š
   ```
   æœç´¢å¹¶åˆ†æžä¸€ä¸‹ 2024 å¹´ AI é¢†åŸŸçš„é‡å¤§çªç ´ï¼ŒåŒ…æ‹¬æŠ€æœ¯åŽŸç†ã€åº”ç”¨åœºæ™¯å’Œå½±å“
   ```

2. **å¤šæ­¥æŽ¨ç†é—®é¢˜**ï¼š
   ```
   æ¯”è¾ƒä¸€ä¸‹ GPT-4ã€Claude 3.5 å’Œ DeepSeek V3 çš„æŠ€æœ¯ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯
   ```

3. **æ·±åº¦åˆ†æžé—®é¢˜**ï¼š
   ```
   GitHub ä¸Šæœ€çƒ­é—¨çš„ AI å¼€æºé¡¹ç›®æœ‰å“ªäº›ï¼Ÿåˆ†æžå®ƒä»¬çš„æŠ€æœ¯æ ˆå’Œåº”ç”¨ä»·å€¼
   ```

è§‚å¯Ÿæ—¥å¿—è¾“å‡ºï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š
- âœ… `dual_llm_mode=True`
- âœ… ä¸¤æ¬¡æŽ¨ç†è¿‡ç¨‹ï¼ˆFunction Call + Answerï¼‰
- âœ… å®Œæ•´çš„æ€è€ƒè¿‡ç¨‹å±•ç¤º

---

**é…ç½®å®Œæˆï¼ðŸŽ‰**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—æˆ–å‚è€ƒæ•…éšœæŽ’æŸ¥éƒ¨åˆ†ã€‚

