# Change: 添加UI开关控制联网搜索功能

## Why
当前的联网搜索功能需要通过斜杠命令 `/search on|off` 来控制,这对用户来说不够直观和方便。用户需要记住命令格式,而且无法直观地看到当前搜索功能的开关状态。

通过在聊天界面添加一个可视化的UI开关,用户可以:
1. 一键切换搜索功能的启用/禁用状态
2. 直观地看到当前搜索是否启用
3. 无需记忆任何命令,降低使用门槛

## What Changes
- **添加 Chainlit ChatSettings 面板**,包含一个联网搜索开关控件
- **保留现有的 `/search` 命令**作为备用方式,确保向后兼容
- **增强状态显示**,在欢迎消息和配置信息中显示更清晰的搜索状态
- **同步UI开关和命令**,两种方式可以互相配合使用

**技术实现:**
- 使用 Chainlit 的 `@cl.on_settings_update` 装饰器监听设置变化
- 使用 `cl.ChatSettings` 创建设置面板,包含 Switch 控件
- UI开关状态与会话存储(`cl.user_session`)保持同步

## Impact
**影响的规范:**
- `specs/web-search/spec.md` - 修改"搜索开关控制"需求,增加UI控件方式

**影响的代码:**
- `app.py` - 主要修改点:
  - 添加 `@cl.on_settings_update` 回调函数
  - 在 `start()` 函数中初始化 `ChatSettings`
  - 增强欢迎消息中的搜索状态显示

**兼容性:**
- ✅ **非破坏性改动** - 保留所有现有命令功能
- ✅ **向后兼容** - 现有用户可以继续使用 `/search` 命令
- ✅ **无需配置更改** - 不影响环境变量或配置文件

**用户体验改进:**
- 新用户更容易发现和使用联网搜索功能
- 降低学习成本,无需查看帮助文档
- 更符合现代聊天应用的交互习惯


