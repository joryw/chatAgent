# Change: 改进推理内容流式展示和自动折叠体验

## Why

当前 DeepSeek Reasoner 模型虽然已经支持思考过程的展示,但用户体验还有改进空间:

1. **展示不够明确**: 思考内容在创建 Step 时就应该明确展开,让用户能够实时看到流式输出的每个字
2. **折叠时机**: 当思考结束、模型开始正式回答时,应该优雅地将思考内容折叠起来,保持界面整洁
3. **视觉反馈**: 需要更清晰的视觉指示,让用户知道当前处于思考阶段还是回答阶段

通过改进这些体验细节,用户将能够:
- 实时看到模型的思考过程,增加透明度和信任感
- 在思考完成后聚焦于最终答案
- 可以随时展开查看详细的思考过程

## What Changes

- **优化 Chainlit Step 展示逻辑**: 确保思考内容在创建时就明确展开(expanded state)
- **改进折叠触发机制**: 在收到第一个正式回答 chunk 时立即触发折叠,确保过渡流畅
- **增强视觉反馈**: 使用更清晰的名称和图标区分思考阶段和思考完成状态
- **添加状态跟踪**: 使用明确的状态标记避免重复折叠操作
- **改进错误处理**: 确保即使在异常情况下也能正确关闭思考 Step

## Impact

- **受影响的 specs**: model-invocation (修改现有的 Chainlit 界面集成需求)
- **受影响的代码**:
  - `app.py` - 主要变更位置,优化 reasoning 和 answer 的处理逻辑
- **用户体验改进**: 更流畅的思考内容展示和折叠动画,更清晰的状态反馈

## Breaking Changes

无破坏性变更。这是对现有功能的体验优化,不影响 API 接口或配置。

