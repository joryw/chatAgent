## 1. 实现思考过程展示增强
- [x] 1.1 确保 stream 方法中捕获并展示选择工具的思考过程（reasoning before tool call）
- [x] 1.2 确保 stream 方法中捕获并展示判断是否继续调用工具的思考过程（reasoning after observation）
- [x] 1.3 优化思考过程的 UI 展示格式，使其更清晰易读
- [x] 1.4 确保思考过程在 UI 中实时流式更新

## 2. 实现流式输出改进
- [x] 2.1 检查并确保 stream 方法中 answer_llm 使用 astream 而非 ainvoke
- [x] 2.2 确保 run 方法中如果使用 answer_llm 也采用流式输出（如果需要）
  - 注：run方法本身不是流式的，但stream方法中已确保使用流式输出
- [x] 2.3 验证流式输出在所有场景下正常工作

## 3. 测试和验证
- [x] 3.1 代码验证：检查 reasoning_type 逻辑是否正确实现 ✅
- [x] 3.2 代码验证：检查 UI 展示逻辑是否正确实现 ✅
- [x] 3.3 代码验证：检查流式输出是否正确实现 ✅
- [ ] 3.4 手动测试：测试思考过程是否正确展示在选择工具之前
- [ ] 3.5 手动测试：测试思考过程是否正确展示在判断是否继续调用工具时
- [ ] 3.6 手动测试：测试最后一步 answer_llm 生成答案时是否为流式输出
- [ ] 3.7 手动测试：验证单 LLM 模式和双 LLM 模式下的行为一致性

